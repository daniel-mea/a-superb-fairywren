<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>A Superb Fairywren</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@1,700&family=Fraunces:wght@500&display=swap" rel="stylesheet">
<style>
/* base reset */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;
  font-family: 'Fraunces', serif;
  background-color: #000000;
}

.bg-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: calc(var(--vh, 1vh) * 100);
  background-image: url('https://raw.githubusercontent.com/daniel-mea/a-superb-fairywren/main/docs/website_assets/newspaper_dark.jpg');
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  z-index: 0;
  pointer-events: none;
}

body {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
}

.header {
  position: relative;
  z-index: 10;
  color: #FFE555;
  width: 100%;
  padding-top: 15px;
  text-align: center;
  flex-shrink: 0;
}

.header img {
  width: 60px;
  border-radius: 50%;
  transition: width 0.3s ease;
  display: block;
  margin: 0 auto;
}

.header h1 {
  color: #FFE555;
  font-weight: 500;
  text-decoration: line-through;
  text-transform: uppercase;
  margin: 10px 0 0 0;
  font-size: 1.5em;
}

.book-section {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: none;
  z-index: 1;
  width: 100%;
  padding: 10px;
}

.book-container {
  pointer-events: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  width: var(--container-width, 444px);
  transition: width 0.1s ease;
}

.book-image-wrapper {
  overflow: hidden;
  width: 100%;
}

.book-image {
  width: 100%;
  height: auto;
  display: block;
  transition: transform 0.3s ease;
}

.book-image:hover {
  transform: scale(1.03);
}

.buy-button {
  width: var(--button-width, 333px);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  padding: 10px;
  background-color: #FFE555;
  color: #000000;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  font-weight: 444;
  font-size: var(--button-font-size, 17.5px);
  box-sizing: border-box;
  transition: width 0.1s ease, font-size 0.1s ease;
}

.buy-button a {
  color: #000000;
  text-decoration: none;
  transition: color 0.1s ease;
}

.buy-button a:hover {
  color: #ffffff;
}

.buy-button .separator {
  color: #000000;
  pointer-events: none;
}

.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  padding-bottom: 15px;
  z-index: 0;
  color: #FFE555;
  background-color: transparent;
}

.social { 
  display: flex; 
  justify-content: center; 
  gap: 15px; 
  margin-top: 20px; 
}

.social a img { 
  width: 33px; 
  vertical-align: middle; 
}

@media (orientation: portrait) {
  .header img { width: 50px; }
  .social a img { width: 25px; }
}

@media (orientation: landscape) {
  .social a img { width: 22px; }
}

@media (max-width: 1000px) and (max-height: 500px) and (orientation: landscape) {
  .header {
    display: grid;
    place-items: center;
    padding-top: 15px;
  }
  .header a:first-child, .header a:nth-child(2) { 
    grid-area: 1 / 1; 
  }
  .header a:nth-child(2) { 
    display: flex; 
    align-items: center; 
    justify-content: center; 
  }
  .header h1 { 
    margin: 0; 
  }
  .header img { 
    display: block; 
    margin: 0 auto; 
    width: 50px; 
  }
}
</style>
</head>
<body>

<div class="bg-layer" aria-hidden="true"></div>

<div class="header">
  <a href="/home/"><img src="https://raw.githubusercontent.com/daniel-mea/a-superb-fairywren/main/docs/website_assets/site_logo-small.jpg" alt="Site Logo"></a>
  <a href="/home/" style="text-decoration:none;"><h1>A SUPERB FAIRYWREN</h1></a>
</div>

<div class="book-section">
  <div class="book-container">
    <div class="book-image-wrapper">
      <img src="https://raw.githubusercontent.com/daniel-mea/a-superb-fairywren/main/docs/website_assets/Mockup-1ASF_paperback.jpg" alt="A Superb Fairywren Book" class="book-image">
    </div>
    <div class="buy-button">
      <a href="https://buy.stripe.com/14AdRagju5GOfNh31LgrS00">Paperback</a>
      <span class="separator">·</span>
      <a href="https://buy.stripe.com/14AdRagju5GOfNh31LgrS00">eBook</a>
      <span class="separator">·</span>
      <a href="https://buy.stripe.com/14AdRagju5GOfNh31LgrS00">Audiobook</a>
    </div>
  </div>
</div>

<div class="footer">
  <div class="social">
    <a href="https://instagram.com/danny__mea" target="_blank"><img src="https://raw.githubusercontent.com/daniel-mea/a-superb-fairywren/711861aec693b89accf4e2ce56490d1f945656f4/docs/website_assets/icon_ig.svg" alt="Instagram"></a>
    <a href="/contact/"><img src="https://raw.githubusercontent.com/daniel-mea/a-superb-fairywren/2978373eaeac2a4b537306bf46ebce49d3b812c6/docs/website_assets/icon_email.svg" alt="Email"></a>
    <a href="https://www.youtube.com/@DannyMEA" target="_blank"><img src="https://raw.githubusercontent.com/daniel-mea/a-superb-fairywren/711861aec693b89accf4e2ce56490d1f945656f4/docs/website_assets/icon_yt.svg" alt="YouTube"></a>
  </div>
</div>

<script>
/* Set CSS variable --vh to the real viewport height */
(function() {
  const setVh = () => {
    const vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', vh + 'px');
  };
  setVh();
  let tid = null;
  const debouncedSet = () => {
    clearTimeout(tid);
    tid = setTimeout(setVh, 80);
  };
  window.addEventListener('resize', debouncedSet);
  window.addEventListener('orientationchange', debouncedSet);
})();

/* Dynamic sizing based on viewport constraints */
(function() {
  function updateSizes() {
    // Get ACTUAL measured dimensions
    const header = document.querySelector('.header');
    const footer = document.querySelector('.footer');
    const headerHeight = header.offsetHeight;
    const footerHeight = footer.offsetHeight;
    
    // Minimum gap between image/button container and footer
    // Increased to 70px so scaling starts BEFORE icons overlap image
    const minGapToFooter = 70;
    
    // Available space for the container itself
    const availableHeight = window.innerHeight - headerHeight - footerHeight - 20 - minGapToFooter;
    const availableWidth = window.innerWidth - 20; // 10px padding each side
    
    // Now calculate what fits
    // Container needs: image + 15px gap + button (~40px actual height)
    const buttonHeight = 40;
    const maxImageHeight = availableHeight - 15 - buttonHeight;
    const imageAspectRatio = 1.5; // width/height
    const maxWidthForHeight = maxImageHeight * imageAspectRatio;
    
    // Container width is constrained by BOTH available width AND height
    let containerWidth = Math.min(availableWidth, maxWidthForHeight);
    
    // Clamp 200-444
    containerWidth = Math.max(200, Math.min(444, containerWidth));
    
    // Button: 333px until container reaches 333px
    let buttonWidth = containerWidth > 333 ? '333px' : '100%';
    
    // Font scales proportionally
    const fontSize = 10 + ((containerWidth - 200) / (444 - 200)) * (17.5 - 10);
    
    document.documentElement.style.setProperty('--container-width', containerWidth + 'px');
    document.documentElement.style.setProperty('--button-width', buttonWidth);
    document.documentElement.style.setProperty('--button-font-size', fontSize + 'px');
  }
  
  // Run on load and resize
  updateSizes();
  window.addEventListener('resize', updateSizes);
  window.addEventListener('orientationchange', () => {
    setTimeout(updateSizes, 100);
  });
})();
</script>

</body>
</html>